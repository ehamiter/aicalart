<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>aical.art</title>
  <meta name="description" content="News headlines, calendar events, holidays, random styles, and the ever-present orange tabby Hobbes turn into art via GPT + DALL-E.">
  <meta name="keywords" content="web, software, ai, Python, DALL-E, ChatGPT, art, calendar, cat, Hobbes, GPT-4, GPT-4-turbo, gpt-4-1106-preview, dall-e-3">
  <meta name="author" content="Chimera Tier">
  <link rel="apple-touch-icon" sizes="180x180" href="./static/images/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./static/images/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./static/images/icons/favicon-16x16.png">
  <link rel="shortcut icon" href="./static/images/icons/favicon.ico">
  <link rel="manifest" href="./static/site.webmanifest">
  <link rel="stylesheet" href="./static/css/style.css"/>
  <link rel="preconnect" href="https://www.w3counter.com">

  <script>
    let currentDate = new Date();

    function formatDate(date) {
      return date.toISOString().split('T')[0];
    }

    function updateImageTitleAndBackground() {
      let dateString = formatDate(currentDate);
      let orientation = window.matchMedia("(orientation: portrait)").matches ? 'portrait' : 'landscape';
      let textFile = `https://aicalart.s3.amazonaws.com/prompts/${dateString}-${orientation}.txt`;
      let bgFile = `url('https://aicalart.s3.amazonaws.com/images/${dateString}-${orientation}.webp')`;

      fetch(textFile)
      .then(response => response.text())
      .then(text => {
        document.querySelector('.bg-image').setAttribute('title', text);
        document.querySelector('.bg-image').style.backgroundImage = bgFile;
      })
      .catch(error => {
        console.error('Fetch failed: ', error);
      });
    }

    function changeDate(days) {
      currentDate.setDate(currentDate.getDate() + days);
      let minDate = new Date('2023-11-25');  // aical.art's birthday
      let maxDate = new Date();
      if (currentDate < minDate) currentDate = minDate;
      if (currentDate > maxDate) currentDate = maxDate;
      updateImageTitleAndBackground();
    }

    let touchstartX = 0;
    let touchendX = 0;

    function handleGesture() {
      if (touchendX < touchstartX) changeDate(1);
      if (touchendX > touchstartX) changeDate(-1);
    }

    document.addEventListener('touchstart', e => {
      touchstartX = e.changedTouches[0].screenX;
    });

    document.addEventListener('touchend', e => {
      touchendX = e.changedTouches[0].screenX;
      handleGesture();
    });

    document.addEventListener('keydown', function(event) {
      if (event.key === 'ArrowLeft') {
        changeDate(-1);
      } else if (event.key === 'ArrowRight') {
        changeDate(1);
      }
    });

    window.addEventListener("resize", updateImageTitleAndBackground);

    window.onload = updateImageTitleAndBackground;
  </script>

  </head>
  <body onload="updateImageTitleAndBackground()">
    <div class="bg-image"></div>
    <script src="https://www.w3counter.com/tracker.js?id=150909"></script>
  </body>
</html>